<div class="row">
    <div class="col-md-12 general-block-decorator">
        <div class="row">
            <div class="col-md-12 title title-without-tabs">
                {intl l="Configuration Be2Bill"}
            </div>
        </div>

        <div class="form-container">

        {form name="be2bill.configuration.form"}

            {if $form_error}
                <div class="row">
                    <div class="col-md-12">
                        <div class="alert alert-danger">{$form_error_message}</div>
                    </div>
                </div>
            {/if}

            <form action="{url path='be2bill.ajax.transactions'}" method="post">

                {form_hidden_fields form=$form}

                {include file = "includes/inner-form-toolbar.html"
                hide_flags = true
                page_url   = "{url path='/admin/module/be2bill'}"
                close_url  = "{url path='/admin/modules'}"
                }

                <div class="row">
                    <div class="col-md-12">
                        {form_field form=$form field="identifier"}

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{$name}" class="control-label">{intl l="{$label}"}</label>
                                    <input id="{$name}" type="text" name="{$name}" value="{$value}" class="form-control"/>
                                    <span class="help-block">{$label_attr.help}</span>
                                </div>
                            </div>

                        {/form_field}

                        {form_field form=$form field="password"}

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="{$name}" class="control-label">{intl l="{$label}"}</label>
                                <input id="{$name}" type="password" name="{$name}" value="{$value}" class="form-control"/>
                                <span class="help-block">{$label_attr.help}</span>
                            </div>
                        </div>

                        {/form_field}
                        {form_field form=$form field="3dsecure"}

                        <div class="col-md-6 ">
                            <div class="form-group">
                                <label for="{$name}" class="control-label">{intl l="{$label}"}</label>
                                <select id="{$name}" name="{$name}" class="form-control">
                                    <option value="no" {if ({$value} === "no")} selected="selected"{/if} >Non</option>
                                    <option value="yes" {if ({$value} === "yes")} selected="selected"{/if} >Oui</option>
                                </select>
                            </div>
                        </div>

                        {/form_field}

                        {form_field form=$form field="url"}

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="{$name}" class="control-label">{intl l="{$label}"}</label>
                                <input id="{$name}" type="text" name="{$name}" value="{$value}" class="form-control"/>
                                <span class="help-block">{$label_attr.help}</span>
                            </div>
                        </div>

                        {/form_field}

                        {form_field form=$form field="description"}

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="{$name}" class="control-label">{intl l="{$label}"}</label>
                                <textarea id="{$name}" name="{$name}" class="form-control">{$value}</textarea>
                                <span class="help-block">{$label_attr.help}</span>
                            </div>
                        </div>

                        {/form_field}

                        <div class="col-md-6">
                            <strong>{intl l="N'oubliez pas d'aller configurer votre compte dans l'extranet Be2bill :"}</strong>
                            <br/>
                            {intl l="1) Autoriser l'hébergeur à acceder au service Be2Bill en renseignant son adresse IP dans la configuration."}
                            <br/>
                            {intl l="2) Renseigner les urls de notifications :"}
                            <ul>
                                <li>http://<strong>site.com</strong>/be2bill/callback/payment {intl l="(notification de transactions)"}</li>
                                <li>http://<strong>site.com</strong>/be2bill/callback/unpaid {intl l="(notification d'impayés)"}</li>
                            </ul>
                            {intl l="3) Renseigner les urls de redirections :"}
                            <ul>
                                <li>http://<strong>site.com</strong>/be2bill/redirect/payment {intl l="(Url après traitement) "}</li>
                                <li>http://<strong>site.com</strong>be2bill/redirect/cancel {intl l="(Url en cas d'annulation) "}</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </form>

        {/form}
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 general-block-decorator">
        <div class="row">
            <div class="col-md-12 title title-without-tabs">
                {intl l="Transactions Be2Bill"}
            </div>
            <div class="col-md-12">
                <form id="transaction-form" action="/admin/module/be2bill/ajax/transactions" method="get">
                    {intl l="A partir de : "}
                    <input type="date" name="transaction-date"/>
                    {intl l=" interval : "}
                    <select name="transaction-interval">
                        <option value="1">{intl l="Jour"}</option>
                        <option value="7">{intl l="Semaine"}</option>
                        <option value="31">{intl l="Mois"}</option>
                    </select>
                </form>
            </div>

        </div>

        <div class="table-responsive">
            <table class="table table-striped table-condensed table-left-aligned">
                <thead>
                <tr>
                    <th>{intl l="ID Be2Bill"}</th>
                    <th>{intl l="Commande"}</th>
                    <th>{intl l="Montant"}</th>
                    <th>{intl l="ID Client"}</th>
                    <th>{intl l="Nom Client"}</th>
                    <th>{intl l="Email Client"}</th>
                    <th>Date</th>
                    <th>{intl l="Remboursement"}</th>
                </tr>
                </thead>
                <tbody id="list-transaction">

                {loop type="be2bill.transactions" name="be2bill_transactions" }
                    <tr>
                        <td>{$TRANSACTIONID}</td>
                        <td>{$ORDERID}</td>
                        <td>{$AMOUNT}</td>
                        <td>{$CUSTOMERID}</td>
                        <td>{$CUSTOMER}</td>
                        <td>{$CUSTOMEREMAIL}</td>
                        <td>{$DATE}</td>
                        <td>
                            {if $REFUNDED == 0}
                                <button type="submit" class="form-submit-button btn btn-sm btn-default btn-primary"> {intl l="Rembourser " } <span class="glyphicon glyphicon-repeat"></span></button>
                            {else}
                                {intl l="Remboursé par :"} {$REFUNDEDBY}
                            {/if}
                        </td>
                    </tr>
                {/loop}
                </tbody>
            </table>
        </div>
    </div>
</div>